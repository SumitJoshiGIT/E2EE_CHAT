
  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v3.1.5)

2025-05-21 12:16:06 [main] INFO  com.e2ee.chat.E2EEChatApplication [] - Starting E2EEChatApplication v1.0.0 using Java 21.0.7 with PID 66091 (/home/sumit/E2EE_CHAT/backend/target/e2ee-chat-backend-1.0.0.jar started by sumit in /home/sumit/E2EE_CHAT/backend)
2025-05-21 12:16:06 [main] DEBUG com.e2ee.chat.E2EEChatApplication [] - Running with Spring Boot v3.1.5, Spring v6.0.13
2025-05-21 12:16:06 [main] INFO  com.e2ee.chat.E2EEChatApplication [] - No active profile set, falling back to 1 default profile: "default"
2025-05-21 12:16:06 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate [] - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-05-21 12:16:07 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate [] - Finished Spring Data repository scanning in 71 ms. Found 5 MongoDB repository interfaces.
2025-05-21 12:16:07 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer [] - Tomcat initialized with port(s): 8080 (http)
2025-05-21 12:16:07 [main] INFO  o.a.catalina.core.StandardService [] - Starting service [Tomcat]
2025-05-21 12:16:07 [main] INFO  o.a.catalina.core.StandardEngine [] - Starting Servlet engine: [Apache Tomcat/10.1.15]
2025-05-21 12:16:07 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] [] - Initializing Spring embedded WebApplicationContext
2025-05-21 12:16:07 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext [] - Root WebApplicationContext: initialization completed in 1689 ms
2025-05-21 12:16:07 [main] DEBUG c.e.chat.config.RequestLoggingFilter [] - Filter 'requestLoggingFilter' configured for use
2025-05-21 12:16:08 [main] INFO  org.mongodb.driver.cluster [] - Adding discovered server localhost:27018 to client view of cluster
2025-05-21 12:16:08 [main] INFO  org.mongodb.driver.client [] - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-boot", "version": "4.9.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.11.0-25-generic"}, "platform": "Java/Ubuntu/21.0.7+6-Ubuntu-0ubuntu124.04"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, streamFactoryFactory=null, commandListeners=[io.micrometer.core.instrument.binder.mongodb.MongoMetricsCommandListener@5b69fd74], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@f325091, com.mongodb.Jep395RecordCodecProvider@437e951d]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[localhost:27018], srvServiceName=mongodb, mode=MULTIPLE, requiredClusterType=REPLICA_SET, requiredReplicaSetName='res0', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='30000 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, sendBufferSize=0}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, sendBufferSize=0}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[io.micrometer.core.instrument.binder.mongodb.MongoMetricsConnectionPoolListener@77b325b3], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, contextProvider=null}
2025-05-21 12:16:08 [cluster-ClusterId{value='682d76b09b9cf65dd6b4eb8b', description='null'}-localhost:27018] INFO  org.mongodb.driver.cluster [] - Monitor thread successfully connected to server with description ServerDescription{address=localhost:27018, type=REPLICA_SET_PRIMARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=24223881, setName='res0', canonicalAddress=127.0.0.1:27018, hosts=[127.0.0.1:27017, 127.0.0.1:27018], passives=[], arbiters=[], primary='127.0.0.1:27018', tagSet=TagSet{[]}, electionId=7fffffff000000000000001e, setVersion=1, topologyVersion=TopologyVersion{processId=682d54a5b86be17f4bd14590, counter=11}, lastWriteDate=Wed May 21 12:16:05 IST 2025, lastUpdateTimeNanos=3763899220026}
2025-05-21 12:16:08 [cluster-ClusterId{value='682d76b09b9cf65dd6b4eb8b', description='null'}-localhost:27018] INFO  org.mongodb.driver.cluster [] - Adding discovered server 127.0.0.1:27017 to client view of cluster
2025-05-21 12:16:08 [cluster-ClusterId{value='682d76b09b9cf65dd6b4eb8b', description='null'}-localhost:27018] INFO  org.mongodb.driver.cluster [] - Adding discovered server 127.0.0.1:27018 to client view of cluster
2025-05-21 12:16:08 [cluster-ClusterId{value='682d76b09b9cf65dd6b4eb8b', description='null'}-localhost:27018] INFO  org.mongodb.driver.cluster [] - Server localhost:27018 is no longer a member of the replica set.  Removing from client view of cluster.
2025-05-21 12:16:08 [cluster-ClusterId{value='682d76b09b9cf65dd6b4eb8b', description='null'}-127.0.0.1:27017] INFO  org.mongodb.driver.cluster [] - Monitor thread successfully connected to server with description ServerDescription{address=127.0.0.1:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=3185987, setName='res0', canonicalAddress=127.0.0.1:27017, hosts=[127.0.0.1:27017, 127.0.0.1:27018], passives=[], arbiters=[], primary='127.0.0.1:27018', tagSet=TagSet{[]}, electionId=null, setVersion=1, topologyVersion=TopologyVersion{processId=682d54a56bfad87fdf060770, counter=5}, lastWriteDate=Wed May 21 12:16:05 IST 2025, lastUpdateTimeNanos=3763913973740}
2025-05-21 12:16:08 [cluster-ClusterId{value='682d76b09b9cf65dd6b4eb8b', description='null'}-localhost:27018] INFO  org.mongodb.driver.cluster [] - Discovered replica set primary localhost:27018 with max election id 7fffffff000000000000001e and max set version 1
2025-05-21 12:16:08 [cluster-ClusterId{value='682d76b09b9cf65dd6b4eb8b', description='null'}-127.0.0.1:27018] INFO  org.mongodb.driver.cluster [] - Monitor thread successfully connected to server with description ServerDescription{address=127.0.0.1:27018, type=REPLICA_SET_PRIMARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=2032367, setName='res0', canonicalAddress=127.0.0.1:27018, hosts=[127.0.0.1:27017, 127.0.0.1:27018], passives=[], arbiters=[], primary='127.0.0.1:27018', tagSet=TagSet{[]}, electionId=7fffffff000000000000001e, setVersion=1, topologyVersion=TopologyVersion{processId=682d54a5b86be17f4bd14590, counter=11}, lastWriteDate=Wed May 21 12:16:05 IST 2025, lastUpdateTimeNanos=3763916583698}
2025-05-21 12:16:08 [cluster-ClusterId{value='682d76b09b9cf65dd6b4eb8b', description='null'}-127.0.0.1:27018] INFO  org.mongodb.driver.cluster [] - Discovered replica set primary 127.0.0.1:27018 with max election id 7fffffff000000000000001e and max set version 1
2025-05-21 12:16:08 [main] INFO  o.s.s.web.DefaultSecurityFilterChain [] - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@15ac59c2, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7a7d1b47, org.springframework.security.web.context.SecurityContextHolderFilter@348d18a3, org.springframework.security.web.header.HeaderWriterFilter@3910fe11, org.springframework.web.filter.CorsFilter@6eb82908, org.springframework.security.web.authentication.logout.LogoutFilter@8d7b252, com.e2ee.chat.security.JwtAuthenticationFilter@4a8df3e2, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2d000e80, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@20e6c4dc, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3d98d138, org.springframework.security.web.session.SessionManagementFilter@78b41097, org.springframework.security.web.access.ExceptionTranslationFilter@57a48985, org.springframework.security.web.access.intercept.AuthorizationFilter@f4c0e4e]
2025-05-21 12:16:09 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver [] - Exposing 3 endpoint(s) beneath base path '/actuator'
2025-05-21 12:16:09 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer [] - Tomcat started on port(s): 8080 (http) with context path ''
2025-05-21 12:16:09 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler [] - Starting...
2025-05-21 12:16:09 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler [] - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@fb6097b]]
2025-05-21 12:16:09 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler [] - Started.
2025-05-21 12:16:09 [main] INFO  com.e2ee.chat.E2EEChatApplication [] - Started E2EEChatApplication in 4.177 seconds (process running for 5.206)
2025-05-21 12:16:09 [main] INFO  c.e2ee.chat.config.MongoIndexConfig [] - Creating MongoDB indices...
2025-05-21 12:16:09 [main] INFO  c.e2ee.chat.config.MongoIndexConfig [] - MongoDB indices created successfully
2025-05-21 12:16:09 [main] INFO  c.e2ee.chat.config.DataInitializer [] - Checking if database needs initialization...
2025-05-21 12:16:09 [main] INFO  c.e2ee.chat.config.DataInitializer [] - Clearing all chats...
2025-05-21 12:16:09 [main] INFO  c.e2ee.chat.config.DataInitializer [] - All chats cleared.
2025-05-21 12:16:09 [main] INFO  c.e2ee.chat.config.DataInitializer [] - Database already contains data, skipping initialization.
2025-05-21 12:16:09 [main] INFO  c.e2ee.chat.config.DataInitializer [] - Clearing all chat messages...
2025-05-21 12:16:09 [main] INFO  c.e2ee.chat.config.DataInitializer [] - All chat messages cleared.
2025-05-21 12:16:09 [main] INFO  com.e2ee.chat.E2EEChatApplication [] - Successfully connected to MongoDB
2025-05-21 12:16:09 [main] INFO  c.e2ee.chat.config.MongoHealthCheck [] - Checking MongoDB connection...
2025-05-21 12:16:09 [main] INFO  c.e2ee.chat.config.MongoHealthCheck [] - MongoDB connection successful. Found collections:
2025-05-21 12:16:09 [main] INFO  c.e2ee.chat.config.MongoHealthCheck [] -   - messages (0 documents)
2025-05-21 12:16:09 [main] INFO  c.e2ee.chat.config.MongoHealthCheck [] -   - chat_messages (0 documents)
2025-05-21 12:16:09 [main] INFO  c.e2ee.chat.config.MongoHealthCheck [] -   - users (4 documents)
2025-05-21 12:16:09 [main] INFO  c.e2ee.chat.config.MongoHealthCheck [] -   - user_profiles (4 documents)
2025-05-21 12:16:09 [main] INFO  c.e2ee.chat.config.MongoHealthCheck [] -   - chats (0 documents)
2025-05-21 12:16:09 [main] INFO  c.e2ee.chat.config.MongoHealthCheck [] - MongoDB health check completed successfully.
2025-05-21 12:17:08 [MessageBroker-1] INFO  o.s.w.s.c.WebSocketMessageBrokerStats [] - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2025-05-21 12:23:58 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler [] - Stopping...
2025-05-21 12:23:58 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler [] - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@fb6097b]]
2025-05-21 12:23:58 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler [] - Stopped.
